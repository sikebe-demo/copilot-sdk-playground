name: "Copilot Setup Steps"

on:
  workflow_dispatch:

jobs:
  copilot-setup-steps:
    runs-on: ubuntu-latest

    permissions:
      contents: read

    steps:
    - uses: actions/checkout@v4

    - name: Setup .NET
      uses: actions/setup-dotnet@v4
      with:
        global-json-file: global.json

    - name: Setup GitHub CLI
      env:
        GH_CLI_VERSION: 2.83.2
      run: |
        # https://github.com/cli/cli/releases
        wget -q "https://github.com/cli/cli/releases/download/v${GH_CLI_VERSION}/gh_${GH_CLI_VERSION}_linux_amd64.deb" -O gh.deb
        sudo dpkg -i gh.deb
        gh --version

    - name: Setup Copilot CLI
      env:
        COPILOT_CLI_VERSION: 0.0.386
      run: |
        # https://github.com/github/copilot-cli/releases
        wget -q "https://github.com/github/copilot-cli/releases/download/v${COPILOT_CLI_VERSION}/copilot-linux-x64.tar.gz" -O copilot-cli.tar.gz
        sudo tar -xzf copilot-cli.tar.gz -C /usr/local/bin
        copilot --version

    - name: Build
      run: dotnet build
